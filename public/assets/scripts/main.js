angular.module("dias.api",["ngResource"]),angular.module("dias.api").config(["$httpProvider",function(e){"use strict";e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]),angular.module("dias.ui.messages",["ui.bootstrap"]),angular.element(document).ready(function(){"use strict";angular.bootstrap(document.querySelector('[data-ng-controller="MessagesController"]'),["dias.ui.messages"])}),angular.module("dias.ui.users",["ui.bootstrap","dias.api"]),angular.module("dias.ui",["dias.ui.messages","dias.ui.users"]),angular.module("dias.api").factory("Annotation",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/:endpoint/:id/:slug",{id:"@id"},{get:{method:"GET",params:{endpoint:"annotations"}},save:{method:"PUT",params:{endpoint:"annotations"}},"delete":{method:"DELETE",params:{endpoint:"annotations"}},query:{method:"GET",params:{endpoint:"images",slug:"annotations"},isArray:!0},add:{method:"POST",params:{endpoint:"images",slug:"annotations"}}})}]),angular.module("dias.api").factory("AnnotationLabel",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/:prefix/:annotation_id/:suffix/:id",{id:"@id",annotation_id:"@annotation_id"},{query:{method:"GET",params:{prefix:"annotations",suffix:"labels"},isArray:!0},attach:{method:"POST",params:{prefix:"annotations",suffix:"labels"}},save:{method:"PUT",params:{prefix:"annotation-labels",annotation_id:null,suffix:null}},"delete":{method:"DELETE",params:{prefix:"annotation-labels",annotation_id:null,suffix:null}}})}]),angular.module("dias.api").factory("Attribute",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/attributes/:id",{id:"@id"},{add:{method:"POST"}})}]),angular.module("dias.api").factory("Image",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/images/:id")}]),angular.module("dias.api").factory("Label",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/labels/:id",{id:"@id"},{add:{method:"POST"},save:{method:"PUT"}})}]),angular.module("dias.api").factory("MediaType",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/media-types/:id",{id:"@id"})}]),angular.module("dias.api").factory("OwnUser",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/users/my",{},{save:{method:"PUT"}})}]),angular.module("dias.api").factory("Project",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/projects/:id",{id:"@id"},{query:{method:"GET",params:{id:"my"},isArray:!0},add:{method:"POST"},save:{method:"PUT"}})}]),angular.module("dias.api").factory("ProjectTransect",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/projects/:project_id/transects/:id",{id:"@id"},{add:{method:"POST"},attach:{method:"POST"},detach:{method:"DELETE"}})}]),angular.module("dias.api").factory("ProjectUser",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/projects/:project_id/users/:id",{id:"@id"},{save:{method:"PUT"},attach:{method:"POST"},detach:{method:"DELETE"}})}]),angular.module("dias.api").factory("Role",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/roles/:id",{id:"@id"})}]),angular.module("dias.api").factory("Shape",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/shapes/:id",{id:"@id"})}]),angular.module("dias.api").factory("Transect",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/transects/:id",{id:"@id"},{save:{method:"PUT"}})}]),angular.module("dias.api").factory("TransectImage",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/transects/:transect_id/images")}]),angular.module("dias.api").factory("User",["$resource","URL",function(e,a){"use strict";return e(a+"/api/v1/users/:id/:query",{id:"@id"},{save:{method:"PUT"},add:{method:"POST"},find:{method:"GET",params:{id:"find"},isArray:!0}})}]),angular.module("dias.api").service("roles",["Role",function(e){"use strict";var a={},t={};e.query(function(e){e.forEach(function(e){a[e.id]=e.name,t[e.name]=e.id})}),this.getName=function(e){return a[e]},this.getId=function(e){return t[e]}}]),angular.module("dias.api").service("shapes",["Shape",function(e){"use strict";var a={},t={},i=e.query(function(e){e.forEach(function(e){a[e.id]=e.name,t[e.name]=e.id})});this.getName=function(e){return a[e]},this.getId=function(e){return t[e]},this.getAll=function(){return i}}]),angular.module("dias.api").constant("URL",window.$diasBaseUrl||""),angular.module("dias.ui.messages").constant("MAX_MSG",1),angular.module("dias.ui.messages").controller("MessagesController",["$scope","MAX_MSG",function(e,a){"use strict";e.alerts=[],window.$diasPostMessage=function(t,i){e.$apply(function(){e.alerts.unshift({message:i,type:t||"info"}),e.alerts.length>a&&e.alerts.pop()})},e.close=function(a){e.alerts.splice(a,1)}}]),angular.module("dias.ui.messages").service("msg",function(){"use strict";var e=this;this.post=function(e,a){a=a||e,window.$diasPostMessage(e,a)},this.danger=function(a){e.post("danger",a)},this.warning=function(a){e.post("warning",a)},this.success=function(a){e.post("success",a)},this.info=function(a){e.post("info",a)},this.responseError=function(a){var t=a.data;if(t)if(t.message)e.danger(t.message);else if(t)for(var i in t)e.danger(t[i][0]);else e.danger("There was an error, sorry.");else e.danger("The server didn't respond, sorry.")}}),angular.module("dias.ui.users").directive("userChooser",function(){"use strict";return{restrict:"A",scope:{select:"=userChooser"},replace:!0,template:'<input type="text" data-ng-model="selected" data-typeahead="user.name for user in find($viewValue)" data-typeahead-wait-ms="250" data-typeahead-on-select="select($item)"/>',controller:["$scope","User",function(e,a){e.find=function(e){return a.find({query:e}).$promise}}]}});
//# sourceMappingURL=main.js.map