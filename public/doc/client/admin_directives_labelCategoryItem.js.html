<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: admin/directives/labelCategoryItem.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: admin/directives/labelCategoryItem.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace dias.admin
 * @ngdoc directive
 * @name adminLabelCategoryItem
 * @memberOf dias.admin
 * @description A label category list item.
 */
angular.module('dias.admin').directive('adminLabelCategoryItem', function ($compile, $timeout, $templateCache) {
        "use strict";

        return {
            restrict: 'C',

            templateUrl: 'label-item.html',

            scope: true,

            link: function (scope, element, attrs) {
                // wait for this element to be rendered until the children are
                // appended, otherwise there would be too much recursion for
                // angular
                var content = angular.element($templateCache.get('label-subtree.html'));
                $timeout(function () {
                    element.append($compile(content)(scope));
                });
            },

            controller: function ($scope) {
                // open the subtree of this item
                $scope.isOpen = false;
                // this item has children
                $scope.isExpandable = !!$scope.categoriesTree[$scope.item.id];
                // this item is currently selected
                $scope.isSelected = false;
                // the user clicked on the 'x' button
                $scope.removing = false;

                $scope.startRemove = function () {
                    $scope.removing = true;
                };

                $scope.cancelRemove = function () {
                    $scope.removing = false;
                };

                // handle this by the event rather than an own click handler to
                // deal with click and search field actions in a unified way
                $scope.$on('categories.selected', function (e, categoryId) {
                    // if an item is selected, its subtree and all parent items
                    // should be opened
                    if ($scope.item.id === categoryId) {
                        $scope.isOpen = true;
                        $scope.isSelected = true;
                        // this hits all parent scopes/items
                        $scope.$emit('categories.openParents');
                    } else {
                        $scope.isOpen = false;
                        $scope.isSelected = false;
                    }
                });

                // if a child item was selected, this item should be opened, too
                // so the selected item becomes visible in the tree
                $scope.$on('categories.openParents', function (e) {
                    $scope.isOpen = true;
                    // stop propagation if this is a root element
                    if ($scope.item.parent_id === null) {
                        e.stopPropagation();
                    }
                });

                // check, if item still has children
                $scope.$on('categories.refresh', function (e) {
                    $scope.isExpandable = !!$scope.categoriesTree[$scope.item.id];
                });
            }
        };
    }
);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>directive</h3><ul><li><a href="dias.admin.adminLabelCategoryItem.html">adminLabelCategoryItem</a></li><li><a href="dias.ui.users.userChooser.html">userChooser</a></li></ul><h3>controller</h3><ul><li><a href="dias.admin.AdminLabelsController.html">AdminLabelsController</a></li><li><a href="dias.ui.messages.MessagesController.html">MessagesController</a></li></ul><h3>factory</h3><ul><li><a href="dias.api.Annotation.html">Annotation</a></li><li><a href="dias.api.AnnotationLabel.html">AnnotationLabel</a></li><li><a href="dias.api.Attribute.html">Attribute</a></li><li><a href="dias.api.Image.html">Image</a></li><li><a href="dias.api.Label.html">Label</a></li><li><a href="dias.api.MediaType.html">MediaType</a></li><li><a href="dias.api.OwnUser.html">OwnUser</a></li><li><a href="dias.api.Project.html">Project</a></li><li><a href="dias.api.ProjectLabel.html">ProjectLabel</a></li><li><a href="dias.api.ProjectTransect.html">ProjectTransect</a></li><li><a href="dias.api.ProjectUser.html">ProjectUser</a></li><li><a href="dias.api.Role.html">Role</a></li><li><a href="dias.api.Shape.html">Shape</a></li><li><a href="dias.api.Transect.html">Transect</a></li><li><a href="dias.api.TransectImage.html">TransectImage</a></li><li><a href="dias.api.User.html">User</a></li></ul><h3>service</h3><ul><li><a href="dias.api.roles.html">roles</a></li><li><a href="dias.api.shapes.html">shapes</a></li><li><a href="dias.ui.messages.msg.html">msg</a></li></ul><h3>constant</h3><ul><li><a href="dias.api.URL.html">URL</a></li><li><a href="dias.ui.messages.MAX_MSG.html">MAX_MSG</a></li></ul><h3>Namespaces</h3><ul><li><a href="dias.admin.html">dias.admin</a></li><li><a href="dias.api.html">dias.api</a></li><li><a href="dias.ui.html">dias.ui</a></li><li><a href="dias.ui.messages.html">dias.ui.messages</a></li><li><a href="dias.ui.users.html">dias.ui.users</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> 
    using <a href="https://github.com/allenhwkim/angular-jsdoc">Angular-JSDoc template </a> 
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
<script>
  // scroll to the current document navigation
  var href=window.location.href.match(/\/([^\/]+$)/)[1];
  if (currentNav = document.querySelector("nav a[href='"+href+"']"))
    currentNav.scrollIntoView(true);
  // scroll to the top of the document
  if (window.location.hash == "")
    document.querySelector("body").scrollIntoView(true);
  // adjust the width of main section by navigation width
  // var navWidth = document.querySelector('nav').getBoundingClientRect().width;
  // var mainWidth = document.querySelector('#main').getBoundingClientRect().width;
  // document.querySelector('#main').style.width = (mainWidth - navWidth)+'px';
</script>
</body>
</html>
