angular.module("biigle.projects",["biigle.api","biigle.ui"]),angular.module("biigle.projects").controller("ProjectLabelTreesController",["$scope","PROJECT","LABEL_TREES","ProjectLabelTree","msg",function(e,i,r,t,n){"use strict";var o,l=!1,c=!1;e.selected={tree:null};var u=function(e){for(var i=r.length-1;i>=0;i--)if(r[i].id===e.id)return!1;return!0},a=function(i){r.push(i),e.selected.tree=null,c=!1},d=function(e){for(var i=r.length-1;i>=0;i--)if(r[i].id===e.id){r.splice(i,1);break}c=!1};e.isEditing=function(){return l},e.isLoading=function(){return c},e.toggleEditing=function(){l=!l,o||(o=t.available({project_id:i.id}))},e.getTrees=function(){return r},e.attachLabelTree=function(e){e&&void 0!==e.id&&u(e)&&(t.attach({project_id:i.id},{id:e.id},function(){a(e)},n.responseError),c=!0)},e.getAvailableTrees=function(){return o.filter(u)},e.detachLabelTree=function(e){t.detach({project_id:i.id},{id:e.id},d,n.responseError),c=!0}}]);