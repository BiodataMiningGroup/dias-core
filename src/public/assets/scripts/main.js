!function(e){var i={};function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(i){return e[i]}.bind(null,n));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},t.p="/",t(t.s=0)}({0:function(e,i,t){t("WfG0"),e.exports=t("zcrr")},WfG0:function(e,i,t){"use strict";t.r(i);var r={components:{previewThumbnail:{template:'<figure\n        class="preview-thumbnail"\n        @mousemove="updateIndex($event)"\n        @mouseenter="updateHovered"\n        >\n            <i\n                v-if="icon"\n                class="preview-thumbnail__icon fas fa-lg"\n                :class="iconClass"\n                ></i>\n            <span\n                v-if="removable"\n                class="preview-thumbnail__close close"\n                @click.prevent="remove"\n                :title="removeTitle"\n                >&times;</span>\n            <div class="preview-thumbnail__images" v-if="showPreview">\n                <img\n                    v-for="(uri, i) in uris"\n                    v-show="thumbShown(i)"\n                    @error="failed(i)"\n                    :src="uri"\n                    >\n            </div>\n            <div v-else class="preview-thumbnail__fallback">\n                <slot></slot>\n            </div>\n            <slot name="caption"></slot>\n            <span\n                v-show="someLoaded"\n                class="preview-thumbnail__progress"\n                :style="{width: progress}"\n                ></span>\n    </figure>',props:{id:{type:Number,required:!0},thumbUris:{required:!0},removable:{type:Boolean,default:!1},removeTitle:{type:String,default:"Remove this volume"},icon:{type:String}},data:function(){return{index:0,uris:[],hovered:!1}},computed:{progress:function(){return 100*this.index/(this.uris.length-1)+"%"},showFallback:function(){return!1===this.uris[this.index]},showPreview:function(){return this.hovered&&this.someLoaded},someLoaded:function(){return this.uris.reduce((function(e,i){return e||!1!==i}),!1)},iconClass:function(){return this.icon?"fa-"+this.icon:""}},methods:{thumbShown:function(e){return this.index===e&&!this.failed[e]},updateIndex:function(e){var i=this.$el.getBoundingClientRect();this.index=Math.max(0,Math.floor(this.uris.length*(e.clientX-i.left)/i.width))},remove:function(){this.$emit("remove",this.id)},failed:function(e){this.uris.splice(e,1,!1)},updateHovered:function(){this.hovered=!0}},created:function(){Array.isArray(this.thumbUris)?this.uris=this.thumbUris.slice():this.uris=this.thumbUris.split(",")}}}},n=biigle.$require("messages").handleErrorResponse,s=biigle.$require("core.mixins.loader"),a=biigle.$require("core.mixins.editor"),l=biigle.$require("api.projects"),o=biigle.$require("core.components.loader"),u={mixins:[s,a],components:{typeahead:biigle.$require("core.components.typeahead"),loader:o},data:{project:null,labelTrees:[],availableLabelTrees:[],typeaheadTemplate:'<span v-text="item.name"></span><br><small v-text="item.description"></small>'},computed:{classObject:function(){return{"panel-warning":this.editing}},hasNoLabelTrees:function(){return 0===this.labelTrees.length},labelTreeIds:function(){return this.labelTrees.map((function(e){return e.id}))},attachableLabelTrees:function(){var e=this;return this.availableLabelTrees.filter((function(i){return-1===e.labelTreeIds.indexOf(i.id)}))}},methods:{fetchAvailableLabelTrees:function(){l.queryAvailableLabelTrees({id:this.project.id}).then(this.availableLabelTreesFetched,n)},availableLabelTreesFetched:function(e){this.availableLabelTrees=e.data.map(this.parseLabelTreeVersionedName)},attachTree:function(e){var i=this;e&&(this.startLoading(),l.attachLabelTree({id:this.project.id},{id:e.id}).then((function(){return i.treeAttached(e)}),n).finally(this.finishLoading))},treeAttached:function(e){for(var i=this.availableLabelTrees.length-1;i>=0;i--)this.availableLabelTrees[i].id===e.id&&this.availableLabelTrees.splice(i,1);this.labelTrees.push(e)},removeTree:function(e){var i=this;this.startLoading(),l.detachLabelTree({id:this.project.id,label_tree_id:e.id}).then((function(){return i.treeRemoved(e)}),n).finally(this.finishLoading)},treeRemoved:function(e){for(var i=this.labelTrees.length-1;i>=0;i--)this.labelTrees[i].id===e.id&&this.labelTrees.splice(i,1);this.availableLabelTrees.push(e)},parseLabelTreeVersionedName:function(e){return e.version&&(e.name=e.name+" @ "+e.version.name),e}},created:function(){this.$once("editing.start",this.fetchAvailableLabelTrees),this.labelTrees=biigle.$require("projects.labelTrees").map(this.parseLabelTreeVersionedName),this.project=biigle.$require("projects.project")}};biigle.$mount("projects-dashboard-main",r),biigle.$mount("projects-label-trees",u)},zcrr:function(e,i){}});