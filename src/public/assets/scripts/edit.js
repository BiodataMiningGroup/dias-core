angular.module("biigle.volumes.edit",["biigle.api","biigle.ui.messages"]),angular.module("biigle.volumes.edit").config(["$compileProvider",function(e){"use strict";e.debugInfoEnabled(!1)}]),angular.module("biigle.volumes.edit").controller("ImagesController",["$scope","$element","Image","VolumeImage","VOLUME_ID","msg",function(e,a,i,n,t,s){"use strict";var o={confirm:a.attr("data-confirmation"),success:a.attr("data-success")};e.data={addingNewImages:!1,filenames:"",newImages:[]};var m=function(a){var i=document.getElementById("volume-image-"+a);if(i)i.remove();else for(var n=e.data.newImages.length-1;n>=0;n--)if(e.data.newImages[n].id===a){e.data.newImages.splice(n,1);break}};e.deleteImage=function(e,a){var n=o.confirm.replace(":img","#"+e+" ("+a+")");confirm(n)&&i.delete({id:e},function(){m(e),s.success(o.success)},s.responseError)},window.$biigleVolumesEditDeleteImage=function(a,i){e.$apply(function(){e.deleteImage(a,i)})},e.toggleAddingNewImage=function(){e.data.addingNewImages=!e.data.addingNewImages},e.addNewImages=function(){var a=n.save({volume_id:t},{images:e.data.filenames},function(){Array.prototype.push.apply(e.data.newImages,a),e.data.filenames=""},s.responseError)}}]);