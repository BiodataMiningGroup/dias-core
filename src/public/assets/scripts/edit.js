angular.module("dias.transects.edit",["dias.api","dias.ui.messages"]),angular.module("dias.transects.edit").config(["$compileProvider",function(e){"use strict";e.debugInfoEnabled(!1)}]),angular.module("dias.transects.edit").controller("ImagesController",["$scope","$element","Image","TransectImage","TRANSECT_ID","msg",function(e,a,s,t,n,i){"use strict";var d={confirm:a.attr("data-confirmation"),success:a.attr("data-success")};e.data={addingNewImages:!1,filenames:"",newImages:[]};var r=function(a){var s=document.getElementById("transect-image-"+a);if(s)s.remove();else for(var t=e.data.newImages.length-1;t>=0;t--)if(e.data.newImages[t].id===a){e.data.newImages.splice(t,1);break}};e.deleteImage=function(e,a){var t=d.confirm.replace(":img","#"+e+" ("+a+")");confirm(t)&&s["delete"]({id:e},function(){r(e),i.success(d.success)},i.responseError)},window.$diasTransectsEditDeleteImage=function(a,s){e.$apply(function(){e.deleteImage(a,s)})},e.toggleAddingNewImage=function(){e.data.addingNewImages=!e.data.addingNewImages},e.addNewImages=function(){var a=t.save({transect_id:n},{images:e.data.filenames},function(){Array.prototype.push.apply(e.data.newImages,a),e.data.filenames=""},i.responseError)}}]);